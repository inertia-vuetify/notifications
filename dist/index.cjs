"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),A=require("@inertiajs/vue3"),p=require("vuetify/components");function b(n){return"name"in n&&typeof n.name=="string"}function g(n){return"url"in n&&"method"in n}const N=Symbol("inertia-vuetify-notifications"),y={flashKeys:["success","error","warning","info","notification"],defaults:{timeout:5e3,closable:!0,location:"bottom"},actions:{},colorMap:{success:"success",error:"error",warning:"warning",info:"info"}};function w(n={}){const i={...y,...n,defaults:{...y.defaults,...n.defaults},colorMap:{...y.colorMap,...n.colorMap},actions:{...n.actions}},c=e.ref([]),s=new Map;for(const[t,o]of Object.entries(i.actions))s.set(t,o);function u(t,o){if(typeof t=="string")return{text:t,color:o?i.colorMap[o]:void 0,timeout:i.defaults.timeout,closable:i.defaults.closable};const f=t.type?i.colorMap[t.type]||t.type:o?i.colorMap[o]:void 0;return{text:t.message,color:f,timeout:t.timeout??i.defaults.timeout,closable:t.closable??i.defaults.closable,actions:t.actions}}function a(t,o){const f=u(t,o);c.value.push(f)}function l(t,o){s.set(t,o)}function d(t){s.delete(t)}async function r(t){if(b(t)){const o=s.get(t.name);o?await o(t.payload):console.warn(`[inertia-vuetify-notifications] No handler registered for action: ${t.name}`)}else if(g(t)){const o=t.method.toLowerCase();A.router.visit(t.url,{method:o,data:t.data})}}return{queue:c,notify:a,registerAction:l,unregisterAction:d,executeAction:r,options:i}}function h(){const n=e.inject(N);if(!n)throw new Error("[inertia-vuetify-notifications] useNotifications() must be used within a component tree that has the notification plugin installed. Did you forget to call app.use(inertiaVuetifyNotifications())?");return n}function v(n,i){for(const c of i.options.flashKeys){const s=n[c];s!=null&&i.notify(s,c)}}function C(n={}){return{install(i){const c=w(n);i.provide(N,c);let s=null;document.addEventListener("inertia:before",()=>{s=null}),document.addEventListener("inertia:success",(u=>{const a=u.detail.page?.flash;if(!a||typeof a!="object"||Object.keys(a).length===0)return;const l=JSON.stringify(a);l!==s&&(s=l,v(a,c))}))}}}const V=e.defineComponent({__name:"NotificationProvider",setup(n){const{queue:i,executeAction:c,options:s}=h();function u(r){return typeof r=="object"&&r!==null&&"actions"in r&&Array.isArray(r.actions)&&r.actions.length>0}function a(r){return r.label}async function l(r){await c(r)}function d(r){return typeof r=="string"?!0:typeof r=="object"&&r!==null&&"closable"in r?r.closable!==!1:!0}return(r,t)=>(e.openBlock(),e.createBlock(e.unref(p.VSnackbarQueue),{modelValue:e.unref(i),"onUpdate:modelValue":t[0]||(t[0]=o=>e.isRef(i)?i.value=o:null),location:e.unref(s).defaults.location,closable:e.unref(s).defaults.closable,timeout:e.unref(s).defaults.timeout},{actions:e.withCtx(({item:o,props:f})=>[u(o)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(o.actions,(m,k)=>(e.openBlock(),e.createBlock(e.unref(p.VBtn),{key:k,variant:"text",size:"small",onClick:x=>l(m)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a(m)),1)]),_:2},1032,["onClick"]))),128)):e.createCommentVNode("",!0),d(o)?(e.openBlock(),e.createBlock(e.unref(p.VBtn),e.normalizeProps(e.mergeProps({key:1},f)),null,16)):e.createCommentVNode("",!0)]),_:1},8,["modelValue","location","closable","timeout"]))}});exports.NotificationProvider=V;exports.inertiaVuetifyNotifications=C;exports.isNamedAction=b;exports.isUrlAction=g;exports.useNotifications=h;
